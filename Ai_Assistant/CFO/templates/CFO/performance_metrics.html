{% extends "CFO/base.html" %}
{% load static %}

{% block content %}
<div class="container py-5">
    <h2 class="mb-4">üìä Performance Metrics Dashboard</h2>

    {% if kpis %}
    <div class="row g-3">

        <!-- Revenue -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Total Revenue</h5>
                <h3 class="text-success">${{ kpis.total_revenue }}</h3>
            </div>
        </div>

        <!-- Profit -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Total Profit</h5>
                <h3 class="text-primary">${{ kpis.total_profit }}</h3>
            </div>
        </div>

        <!-- Expense -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Total Expense</h5>
                <h3 class="text-danger">${{ kpis.total_expense }}</h3>
            </div>
        </div>

        <!-- Cash Balance -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Cash Balance</h5>
                <h3 class="text-warning">${{ kpis.cash_balance }}</h3>
            </div>
        </div>

        <!-- Burn Rate -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Burn Rate (Monthly)</h5>
                <h4>${{ kpis.burn_rate }}</h4>
                <div class="progress">
                    <div class="progress-bar bg-danger" role="progressbar" style="width: {{ kpis.burn_rate_pct }}%;" aria-valuenow="{{ kpis.burn_rate_pct }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <!-- Runway -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Runway</h5>
                <h4>{{ kpis.runway_months }} months</h4>
                {% if kpis.runway_months < 3 %}
                    <span class="badge bg-danger">‚ö†Ô∏è Short Runway</span>
                {% elif kpis.runway_months < 6 %}
                    <span class="badge bg-warning">‚ö†Ô∏è Moderate Runway</span>
                {% else %}
                    <span class="badge bg-success">‚úÖ Healthy</span>
                {% endif %}
            </div>
        </div>

        <!-- Profit Margin -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Profit Margin</h5>
                <h4>{{ kpis.profit_margin }}%</h4>
                <div class="progress">
                    <div class="progress-bar bg-success" role="progressbar" style="width: {{ kpis.profit_margin_pct }}%;" aria-valuenow="{{ kpis.profit_margin_pct }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

        <!-- Revenue Growth -->
        <div class="col-md-6">
            <div class="card shadow-sm p-3">
                <h5>Revenue Growth</h5>
                <h4>{{ kpis.revenue_growth }}%</h4>
                <div class="progress">
                    <div class="progress-bar bg-info" role="progressbar" style="width: {{ kpis.revenue_growth_pct }}%;" aria-valuenow="{{ kpis.revenue_growth_pct }}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>

    </div>
    {% else %}
        <p>No financial reports uploaded yet.</p>
    {% endif %}
</div>
{% endblock %}
